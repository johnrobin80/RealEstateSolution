<section class="main-content">
  <ul class="breadcrumb breadcrumb-style">
    <li class="breadcrumb-item">
      <h5 class="page-title m-b-0">Country List</h5>
    </li>
    <li class="breadcrumb-item bcrumb-1">
      <a routerLink="/dashboard/main"> <i class="fas fa-home font-17"></i></a>
    </li>
    <li class="breadcrumb-item active">Admin</li>
    <li class="breadcrumb-item active">Country</li>
  </ul>

  <!-- <div class="row">
      <div class="col-12 col-md-6 col-lg-6">
        <div class="card">
          <div class="card-header">
            <div class="row col-12 col-md-12 col-lg-12">
              <div class="col-md-6">
                <h4><u>Countries</u></h4>
              </div>
            </div>
          </div>
          <div class="card-body"> -->
  <div class="section-body">
    <div class="row clearfix">
      <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
        <div class="card col-10 col-lg-10 col-md-10 col-sm-10 col-xs-10">
          <div class="p-10">
            <div class="row">
              <div class="col-md-6">
                <div class="d-flex flex-row flex-wrap bd-highlight mb-3">
                  <div class="ngxTableHeader">
                    <div class="table-search-area">
                      <div>
                        <label for="search-input"
                          ><i class="material-icons search-icon"
                            >search</i
                          ></label
                        >
                        <!-- [(ngModel)]="txtSearchValue"
                            (keyup)="searchData(txtSearchValue)" -->
                        <input
                          #search
                          placeholder="Search"
                          type="text"
                          class="browser-default search-field"
                          aria-label="Search box"
                        />
                      </div>
                    </div>

                    <div class="header-buttons-left">
                      <div class="tbl-btn-style">
                        <button
                          class="btn btn-icon icon-left btn-primary rounded-button"
                          (click)="addRow(addRecord)"
                        >
                          <i class="material-icons">add</i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div
                  class="d-flex flex-wrap flex-row-reverse bd-highlight mt-3"
                >
                  <div>
                    <button
                      class="btn btn-icon icon-left btn-success rounded-button"
                      (click)="loadCountries('refresh')"
                      ngbTooltip="refresh"
                    >
                      <i class="material-icons">refresh</i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!---------------------------------------------------------------------------------->
            <!-- <div class="row">
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                <div class="row m-0">
                  <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 p-0">
                    <div class="ngxTableHeader">
                      <div class="table-search-area">
                        <div>
                          <label for="search-input"
                            ><i class="material-icons search-icon"
                              >search</i
                            ></label
                          >
                          <input
                            #search
                            placeholder="Search"
                            type="text"
                            class="browser-default search-field"
                            aria-label="Search box"
                          />
                        </div>
                      </div>

                      <div class="header-buttons-left">
                        <div class="tbl-btn-style">
                          <button
                            class="btn btn-icon icon-left btn-primary rounded-button"
                            (click)="addRow(addRecord)"
                          >
                            <i class="material-icons">add</i>
                          </button>
                        </div>
                        <div>
                          <i class="material-icons">refresh</i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->
            <!-- "countries | datafiltering : 'India' : 'countryname'" -->
            <!--class="material"
             [scrollbarH]="scrollBarHorizontal"  class="col-lg-10 col-md-4 col-sm-4 col-xs-4"-->

            <ngx-datatable
              #table
              class="material"
              [rows]="countries"
              [loadingIndicator]="loadingIndicator"
              [columnMode]="ColumnMode.force"
              [headerHeight]="50"
              [footerHeight]="50"
              rowHeight="auto"
              [limit]="pageSize"
              [reorderable]="reorderable"
              [messages]="{
                emptyMessage: 'No data to display',
                totalMessage: 'Total',
                selectedMessage: 'Selected'
              }"
              [selected]="selected"
              [scrollbarH]="false"
              [selectionType]="SelectionType.single"
            >
              <ngx-datatable-column
                [width]="200"
                prop="countryname"
                name="Country"
              >
                <ng-template
                  let-row="row"
                  ngx-datatable-cell-template
                  let-value="value"
                >
                  {{ value }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column prop="createdon" name="CreatedOn">
                <ng-template
                  let-row="row"
                  ngx-datatable-cell-template
                  let-value="value"
                >
                  {{ value }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column prop="statusname" name="Status">
                <ng-template
                  let-row="row"
                  ngx-datatable-cell-template
                  let-value="value"
                >
                  <div
                    *ngIf="value === 'Active'"
                    class="badge-outline col-green"
                  >
                    {{ value }}
                  </div>
                  <div
                    *ngIf="value === 'Completed'"
                    class="badge-outline col-red"
                  >
                    {{ value }}
                  </div>
                  <div
                    *ngIf="value === 'Pending'"
                    class="badge-outline col-indigo"
                  >
                    {{ value }}
                  </div>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column
                name="Actions"
                [sortable]="false"
                [frozenRight]="true"
              >
                <ng-template
                  let-row="row"
                  let-rowIndex="rowIndex"
                  ngx-datatable-cell-template
                >
                  <span>
                    <!-- class="btn btn-tbl-view h-auto" -->

                    <button
                      type="button"
                      class="btn btn-tbl-edit h-auto"
                      (click)="viewRow(addRecord, row.countryid, rowIndex)"
                      placement="top"
                      ngbTooltip="view"
                    >
                      <i class="fas fa-pen"></i>
                    </button>

                    <!-- class="btn btn-tbl-delete h-auto" -->
                    <button
                      class="btn btn-tbl-delete h-auto"
                      (click)="deleteCountry(row.countryid, row.countryname)"
                      placement="top"
                      ngbTooltip="delete"
                    >
                      <i class="far fa-trash-alt"></i>
                    </button>
                  </span>
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
          </div>
          <!-- <ng-container>
              <div fxLayout="row wrap"></div>
              <img [src]="" />
            </ng-container> -->

          <!-- Add Record Modal Window -->
          <ng-template #addRecord let-modal>
            <!-- <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2"> -->
            <div class="modal-header editRowModal">
              <h4 class="modal-title" id="modal-basic-title">
                <div class="table-modal-header">
                  <div>
                    <div class="fw-bold p-t-9 font-17">
                      <u>{{ modelLabelName }} Country</u>
                    </div>
                  </div>
                </div>
              </h4>
              <!-- <button
                  type="button"
                  class="close"
                  aria-label="Close"
                  (click)="modal.dismiss()"
                >
                  <span aria-hidden="true"
                    ><i class="material-icons">close</i></span
                  >
                </button> -->
              <button
                type="button"
                class="close"
                aria-label="Close"
                (click)="closeModalForm()"
              >
                <span aria-hidden="true"
                  ><i class="material-icons">close</i></span
                >
              </button>
            </div>
            <div class="modal-body">
              <form class="register-form" [formGroup]="register">
                <div class="row">
                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                    <label>Country <span class="text-danger">*</span></label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="country"
                      name="country"
                    />
                    <small
                      class="form-text text-danger"
                      *ngIf="!Country.valid && Country.touched"
                    >
                      Country is required</small
                    >
                  </div>
                </div>
                <div class="row">
                  <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 mb-3">
                    <label>Country Code </label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="countryCode"
                      name="countryCode"
                    />
                  </div>
                </div>
                <div class="row">
                  <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      formControlName="active"
                    />&nbsp;
                    <label class="form-check-label" for="active">
                      Active
                    </label>
                  </div>
                </div>

                <div class="modal-footer">
                  <button
                    type="submit"
                    class="btn btn-primary"
                    (click)="submitCountry(modelLabelName)"
                    [disabled]="!Country.valid"
                  >
                    Submit
                  </button>
                  <!-- <button
                      type="button"
                      class="btn btn-light"
                      (click)="modal.close('Close click')"
                    >
                      Close
                    </button> -->
                  <button
                    type="button"
                    class="btn btn-light"
                    (click)="closeModalForm()"
                  >
                    Close
                  </button>
                </div>
              </form>
            </div>
            <!-- </div> -->
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</section>
